{"version":3,"sources":["uni-app:///main.js","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?b086","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?7aa7","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?9dd6","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?3f66","uni-app:///pages/sub/ai_xiaopu/pay.vue","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?9e6a","webpack:///F:/waimai/pages/sub/ai_xiaopu/pay.vue?f921"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG;AACAA,UAAU,CAACC,YAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AAChH;AACuD;AACL;AACa;;;AAG/D;AAC4K;AAC5K,gBAAgB,sLAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP,KAAK;AACL;AACA,aAAa,2OAEN;AACP,KAAK;AACL;AACA,aAAa,6MAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvEA;AAAA;AAAA;AAAA;AAA6oB,CAAgB,0pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2KjqB;;;;AAIA,6D;AACA;AACA;AACA,kBADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,mBADA;;AAGA,uBAHA;AAIA,mBAJA;AAKA,sBALA,EAKA;AACA,kBANA,EAMA;AACA,qBAPA,EAOA;AACA,iCARA,EAQA;AACA,0BATA,EASA;AACA,sBAVA,EAUA;AACA,cAXA;;AAaA,cAbA;;AAeA;AACA,qBADA,GAfA;;AAkBA,gBAlBA;AAmBA,gBAnBA;AAoBA,2BApBA;AAqBA,yBArBA;AAsBA;AACA,qBADA;AAEA,sBAFA;AAGA,uBAHA;AAIA,oBAJA;AAKA,mBALA;AAMA,kBANA,EAtBA;;AA8BA,wBA9BA;;AAgCA,GArCA;AAsCA;AACA,kBADA,EAtCA;;AAyCA;AACA,wDADA;AAEA,UAFA,oBAEA;AACA;AACA,KAJA;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAzBA,oBAyBA;AACA;AACA,KA3BA,GAzCA;;AAsEA,QAtEA,kBAsEA,MAtEA,EAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA;AACA;AACA;;AAEA,gEAzBA,CAyBA;;AAEA;AACA;;AAEA;AACA,GArGA;AAsGA;AACA;AACA,kBAFA,4BAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OATA;AAUA,KAdA;AAeA;AACA,uBAhBA,+BAgBA,KAhBA,EAgBA;AACA;AACA;AACA,wBADA;AAEA,wBAFA;;AAIA;AACA,OANA,MAMA;AACA;AACA,wBADA;AAEA,wBAFA;;AAIA;AACA;AACA;;AAEA;AACA;AACA,KAlCA;AAmCA,YAnCA,sBAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KA5CA;AA6CA;AACA,kBA9CA,4BA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KAvDA;AAwDA;AACA,gBAzDA,0BAyDA;AACA;AACA,qCADA;AAEA,+BAFA;AAGA,+BAHA;;AAKA,KA/DA;AAgEA;AACA,iBAjEA,yBAiEA,IAjEA,EAiEA;AACA;AACA;AACA,KApEA;AAqEA,cArEA,wBAqEA;;AAEA;AACA;AACA,wBADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,8BADA;AAEA,0BAFA;;AAIA;AACA,OAVA;;AAYA,KAhGA;AAiGA,SAjGA,iBAiGA,KAjGA,EAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,qCAFA;AAGA,mCAHA;AAIA,iCAJA;AAKA,mCALA;AAMA,iCANA;AAOA;AACA;AACA;AACA,iDADA;;AAGA,aAZA;AAaA;AACA;AACA;AACA,iDADA;;AAGA,aAlBA;;AAoBA,SAvBA,MAuBA;AACA;AACA,6CADA;;AAGA;AACA;AACA,8BADA;AAEA,0BAFA;;AAIA;AACA,OAnCA,EAmCA,KAnCA,CAmCA;AACA;AACA;AACA,2CADA;;AAGA,OAxCA;AAyCA,KA5IA;AA6IA,eA7IA,yBA6IA;AACA;AACA;AACA;AACA,KAjJA;AAkJA,mBAlJA,2BAkJA,KAlJA,EAkJA;AACA;AACA,KApJA;AAqJA,OArJA,eAqJA,IArJA,EAqJA;;AAEA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,KAvKA,EAtGA,E;;;;;;;;;;;;;AChLA;AAAA;AAAA;AAAA;AAAk7B,CAAgB,i6BAAG,EAAC,C;;;;;;;;;;;ACAt8B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/sub/ai_xiaopu/pay.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/sub/ai_xiaopu/pay.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay.vue?vue&type=template&id=113b6308&\"\nvar renderjs\nimport script from \"./pay.vue?vue&type=script&lang=js&\"\nexport * from \"./pay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pay.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/sub/ai_xiaopu/pay.vue\"\nexport default component.exports","export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=template&id=113b6308&\"","var components\ntry {\n  components = {\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uLine: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-line/u-line\" */ \"@/uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    uInput: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-input/u-input\" */ \"@/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uSubsection: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-subsection/u-subsection\" */ \"@/uview-ui/components/u-subsection/u-subsection.vue\"\n      )\n    },\n    uToast: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-toast/u-toast\" */ \"@/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.deliverWayCurrent == 0 ? Object.keys(_vm.address_detail) : null\n  var g1 = _vm.deliverWayCurrent == 0 ? Object.keys(_vm.address_detail) : null\n  var m0 = _vm.deliverWayCurrent == 0 ? Number(_vm.delivery_rmbs) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"padding-30 margin-center padding-bottom-150\">\r\n\t\t<view class=\"d-flex\">\r\n\t\t\t<view v-for=\"(item, index) in deliverWayTab\" :key=\"index\" @tap=\"changeDeliverWayTab(index)\"\r\n\t\t\t\t:class=\"{ 'activeTab': index == deliverWayCurrent }\"\r\n\t\t\t\tclass=\"flex-1 padding-top-20 padding-bottom-20 text-center\">\r\n\t\t\t\t{{ item }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 配送地址 -->\r\n\t\t<view v-if=\"deliverWayCurrent == 0\">\r\n\t\t\t<view v-if=\"Object.keys(address_detail).length == 0\"\r\n\t\t\t\tclass=\"bg-color-white padding-20 padding-top-50 padding-bottom-50 border-radius-15\">\r\n\t\t\t\t<view class=\"font30\" @tap=\"addressClick\">\r\n\t\t\t\t\t<label>请选择收货地址</label>\r\n\t\t\t\t\t<view style=\"float: right;\">\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#c1c1c1\" size=\"28\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"Object.keys(address_detail).length > 0\"\r\n\t\t\t\tclass=\"bg-color-white padding-20 padding-top-50 padding-bottom-50 border-radius-15\">\r\n\t\t\t\t<view class=\"font34 font-bold\" @tap=\"addressClick\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<u-icon name=\"map\" color=\"#ef5f1b\" size=\"35\"></u-icon>\r\n\t\t\t\t\t\t<text class=\"padding-left-20\">{{ address_detail.schoolinfo }}{{ address_detail.address }}</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<view style=\"float: right;\">\r\n\t\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#c1c1c1\" size=\"28\"></u-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin-top-10 padding-left-50\">{{ address_detail.real_name }} {{ address_detail.phone }}</view>\r\n\r\n\t\t\t\t<view class=\"padding-top-30 d-flex\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<u-icon name=\"car\" color=\"#ef5f1b\" size=\"35\"></u-icon>\r\n\t\t\t\t\t\t<text class=\"padding-left-20 font-bold\">立即送出</text>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<view class=\"flex-1 text-right\">指定派送时间请自行备注</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"deliverWayCurrent == 1\">\r\n\t\t\t<view class=\"bg-color-white padding-left-20 padding-right-20 padding-top-50 padding-bottom-50 border-radius-15\">\r\n\t\t\t\t<view class=\"font34 font-bold\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<u-icon name=\"map\" color=\"#ef5f1b\" size=\"35\"></u-icon>\r\n\t\t\t\t\t\t<!-- <text>自取点：</text> -->\r\n\t\t\t\t\t\t<text class=\"padding-left-20\">{{ shop_address }}</text>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"margin-top-10 padding-left-50\"> </view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 商品清单 -->\r\n\t\t<view class=\"bg-color-white padding-20 border-radius-15 margin-top-20\">\r\n\t\t\t<view class=\"padding-top-20 padding-bottom-30\">\r\n\t\t\t\t<u-icon name=\"dianpu\" custom-prefix=\"custom-icon\" color=\"#ef5f1b\" size=\"34\"></u-icon>\r\n\t\t\t\t<text class=\"margin-left-10 gray3\">{{ shop_name }}</text>\r\n\t\t\t</view>\r\n\t\t\t<u-line color=\"#f3f3f3\" />\r\n\t\t\t<view class=\"d-row d-jc-between padding-10 padding-bottom-20\" v-for=\"(item, index) in cart\" :key=\"index\">\r\n\t\t\t\t<view class=\"d-row\">\r\n\t\t\t\t\t<view class=\"d-clo d-ai-centen\">\r\n\t\t\t\t\t\t<image style=\"width: 100rpx;height: 100rpx;\" :src=\"item.goods_pic\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"d-clo padding-left-10\">\r\n\t\t\t\t\t\t<view class=\"font28 font-bold margin-bottom-10\">{{ item.goods_name }}</view>\r\n\t\t\t\t\t\t<view class=\"font22 gray4\">{{ item.skuName }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-1 text-right\">\r\n\t\t\t\t\t<text>x{{ item.number }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text-right\" style=\"width: 130rpx;\">\r\n\t\t\t\t\t<text class=\"font-bold\">¥{{ item.price }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<u-line color=\"#f3f3f3\" />\r\n\t\t\t<view v-if=\"deliverWayCurrent == 0\" class=\"d-row d-jc-between padding-10 padding-bottom-20 padding-top-20\">\r\n\t\t\t\t<view class=\"font-bold font28\">打包盒</view>\r\n\t\t\t\t<view style=\"color: #de2406;\">¥{{ box_price }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"deliverWayCurrent == 0\" class=\"d-row d-jc-between padding-10 padding-bottom-20 padding-top-20\">\r\n\t\t\t\t<view class=\"font-bold font28\">配送费</view>\r\n\t\t\t\t<view class=\"font-bold\" v-if=\"Number(delivery_rmbs) == 0\">免配送费</view>\r\n\t\t\t\t<view v-else>¥{{ delivery_rmbs }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<view @tap=\"couponClick\" class=\"u-cell u-border-bottom u-col-center\" style=\"background-color: transparent;\">\r\n\t\t\t\t\t<u-icon name=\"quan\" custom-prefix=\"custom-icon\" color=\"#ef5f1b\" size=\"38\"></u-icon>\r\n\t\t\t\t\t<view class=\"u-cell_title\" style=\"width: auto;\">优惠券</view>\r\n\t\t\t\t\t<view class=\"u-cell__value\">\r\n\t\t\t\t\t\t<text v-if=\"coupon.length > 0\">{{ activeCoupon }}</text>\r\n\t\t\t\t\t\t<text v-if=\"coupon.length == 0\">暂无可用优惠券</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<u-icon name=\"arrow-right\" color=\"#909399\" size=\"26\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-row d-jc-between d-ai-centen padding-10 padding-top-30\">\r\n\t\t\t\t<view class=\"gray3\">\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<view>共{{ numsum }}个商品，小计：<label class=\"font-bold font40\">¥ {{ total }}</label></view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t<!-- 支付方式 -->\r\n\t\t<view class=\"bg-color-white padding-20 border-radius-15 margin-top-20 font30\">\r\n\t\t\t<view class=\"d-row d-jc-between padding-top-20 padding-bottom-30\" style=\"border-bottom: 1rpx solid #F7F7F7;\">\r\n\t\t\t\t<view>支付方式</view>\r\n\t\t\t\t<view>微信支付</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-row d-jc-between padding-top-20 padding-bottom-20\">\r\n\t\t\t\t<view>备注（100个字以内）</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<!-- <u-icon margin-left=\"10\" name=\"arrow-right\" color=\"#c1c1c1\" size=\"28\"></u-icon> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view>\r\n\t\t\t\t<u-input v-model=\"model.remark\" type=\"textarea\" maxlength=\"500\" border=\"true\" border-color=\"#f1f1f1\"\r\n\t\t\t\t\theight=\"200\" auto-height=\"true\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 去支付 -->\r\n\t\t<view class=\"pay\">\r\n\t\t\t<view style=\"margin:0 auto;\" class=\"width100 d-row d-jc-between\">\r\n\t\t\t\t<view class=\"d-row d-jc-start d-ai-centen\" style=\"padding-left: 10rpx;\">\r\n\t\t\t\t\t<view class=\"d-ai-centen padding-left-10\">\r\n\t\t\t\t\t\t<text style=\"vertical-align: middle;\">合计</text>\r\n\t\t\t\t\t\t<text class=\"padding-left-10 text-bolder\"\r\n\t\t\t\t\t\t\tstyle=\"vertical-align: middle;color: #ff6634;font-size: 37rpx;\">¥ {{ total }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"go gray4\">\r\n\t\t\t\t\t<view v-show=\"!paying\" class=\"go gray4 font28 colorWhiteBgBlue\" @tap=\"goPayMoney\">\r\n\t\t\t\t\t\t提交订单\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-show=\"paying\" class=\"go gray4 font28 colorWhiteBgBlue\">\r\n\t\t\t\t\t\t提交订单\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<u-popup v-model=\"couponShow\" mode=\"bottom\">\r\n\t\t\t<view style=\"height: 60vh;position: relative;\">\r\n\t\t\t\t<view class=\"padding-top-20 padding-bottom-20\"\r\n\t\t\t\t\tstyle=\"background-color: #eeeeef; position: sticky; top: 0; z-index: 3;\">\r\n\t\t\t\t\t<u-subsection :list=\"couponlist\" :current=\"current\" active-color=\"#ef5f1b\" :animation=\"true\"\r\n\t\t\t\t\t\t@change=\"couponTabChange\"></u-subsection>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"padding-left-20 padding-right-20 padding-bottom-50\">\r\n\t\t\t\t\t<coupon v-for=\"(item, index) in coupon\" :key=\"index\" v-bind:item=\"item\" @use=\"use\" theme=\"#ff6c00\"\r\n\t\t\t\t\t\tcolor=\"#ffffff\" solid=\"#ff6c00\"></coupon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t\t<u-toast ref=\"uToast\" />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport coupon from '@/components/coolc-coupon/coolc-coupon';\r\nimport {\r\n\tmapState,\r\n\tmapMutations\r\n} from 'vuex'\r\nimport { accMul, accAdd } from '@/tools/utils.js'\r\nexport default {\r\n\tcomponents: {\r\n\t\tcoupon\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tpaying: false,\r\n\r\n\t\t\tcouponShow: false,\r\n\t\t\tshop_name: '',\r\n\t\t\tdelivery_rmbs: 0, // 运费\r\n\t\t\tbox_price: 0, // 打包盒\r\n\t\t\tdeliver_way: '', // 配送方式\r\n\t\t\tdeliverWayTab: ['外卖', '店内'], // 配送tab\r\n\t\t\tdeliverWayCurrent: 0, // 当前选择得方式\r\n\t\t\tshop_address: '', // 自提地址\r\n\t\t\tcart: [],\r\n\r\n\t\t\ttotal: 0,\r\n\r\n\t\t\tcouponlist: [{\r\n\t\t\t\tname: '可用优惠券'\r\n\t\t\t}],\r\n\t\t\tcurrent: 0,\r\n\t\t\tcoupon: [],\r\n\t\t\tactiveCoupon: '选择优惠券',\r\n\t\t\tactiveCouponNum: '',\r\n\t\t\tmodel: {\r\n\t\t\t\tgoods_ids: '',\r\n\t\t\t\tgoods_nums: '',\r\n\t\t\t\tsku_indexes: '',\r\n\t\t\t\taddressid: 0,\r\n\t\t\t\tcouponid: 0,\r\n\t\t\t\tremark: ''\r\n\t\t\t},\r\n\t\t\taddress_detail: {}\r\n\t\t}\r\n\t},\r\n\tprops: {\r\n\t\tindex: 'index'\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(['orderType', 'address', 'store']),\r\n\t\tnumsum() {\r\n\t\t\treturn this.cart.reduce((acc, cur) => acc + cur.number, 0)\r\n\t\t},\r\n\t\t// total() {\r\n\t\t// \tlet total = this.cart.reduce((acc, cur) => {\r\n\t\t// \t\treturn accAdd(acc,accMul(cur.number,cur.price))\r\n\t\t// \t}, 0)\r\n\t\t// \ttotal = Number(total)\r\n\r\n\t\t// \t// 判断是否选择优惠券\r\n\t\t// \tif(Number(this.activeCouponNum) > 0) {\r\n\t\t// \t\ttotal = total - Number(this.activeCouponNum)\r\n\t\t// \t}\r\n\t\t// \t// 判断金额是否符合免运费\r\n\t\t// \tlet enough_free_dyrmbs_fmt = Number(this.enough_free_dyrmbs)\r\n\t\t// \tif(total < enough_free_dyrmbs_fmt) {\r\n\t\t// \t\ttotal = accAdd(total,Number(this.delivery_rmbs))\r\n\t\t// \t}\r\n\t\t// \tif(total < 0) {\r\n\t\t// \t\ttotal = 0\r\n\t\t// \t}\r\n\t\t// \treturn total\r\n\t\t// },\r\n\t\tamount() {\r\n\t\t\treturn this.cart.reduce((acc, cur) => acc + cur.number * cur.price, 0)\r\n\t\t}\r\n\t},\r\n\tonLoad(option) {\r\n\t\tthis.shop_name = option.name\r\n\t\tthis.companyid = option.companyid\r\n\t\tthis.shop_address = option.address\r\n\t\tthis.deliver_way = option.deliver_way\r\n\t\tif (this.deliver_way == 1) {\r\n\t\t\tthis.deliverWayCurrent = 0\r\n\t\t} else if (this.deliver_way == 2) {\r\n\t\t\tthis.deliverWayCurrent = 1\r\n\t\t}\r\n\r\n\t\tthis.cart = uni.getStorageSync('cart') || []\r\n\t\tconsole.log(this.cart)\r\n\t\tlet goods_ids = []\r\n\t\tlet goods_nums = []\r\n\t\tlet sku_indexes = []\r\n\t\tthis.cart.map((item) => {\r\n\t\t\tgoods_ids.push(item.goods_id)\r\n\t\t\tgoods_nums.push(item.number)\r\n\t\t\tsku_indexes.push(item.skuActive)\r\n\t\t})\r\n\t\tthis.model.goods_ids = goods_ids.toString()\r\n\t\tthis.model.goods_nums = goods_nums.toString()\r\n\t\tthis.model.sku_indexes = sku_indexes.toString()\r\n\r\n\t\tthis.model.deliver_way = Number(this.deliverWayCurrent) + 1 // 当前选择的什么配送方式\r\n\r\n\t\tthis.addressdefault()\r\n\t\tthis.mycoupon()\r\n\r\n\t\tthis.calculatePrice()\r\n\t},\r\n\tmethods: {\r\n\t\t// 获取默认地址\r\n\t\taddressdefault() {\r\n\t\t\tlet _this = this;\r\n\t\t\tthis.$store.dispatch('address/addressdefault', {}).then((res) => {\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\tlet data = res.message;\r\n\t\t\t\t\tthis.address_detail = data\r\n\t\t\t\t\t// console.log(this.address_detail)\r\n\t\t\t\t\tthis.model.addressid = data.addressid\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(this.model)\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tchangeDeliverWayTab(index) {\r\n\t\t\tif (this.deliver_way == 1 && index == 1) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\ttitle: '不支持外卖',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t} else if (this.deliver_way == 2 && index == 0) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\ttitle: '不支持自提',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tthis.deliverWayCurrent = index\r\n\r\n\t\t\tthis.model.deliver_way = Number(this.deliverWayCurrent) + 1\r\n\t\t\tthis.calculatePrice()\r\n\t\t},\r\n\t\tmycoupon() {\r\n\r\n\t\t\tlet _this = this;\r\n\t\t\tthis.$store.dispatch('ai_xiaopu/mycoupon', { 'companyid': this.companyid }).then((res) => {\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\tthis.coupon = res.message.coupon_list\r\n\t\t\t\t\tthis.maxpage = res.message.maxpage\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 计算价格\r\n\t\tcalculatePrice() {\r\n\t\t\tlet _this = this;\r\n\t\t\tthis.$store.dispatch('ai_xiaopu/calculatePrice', this.model).then((res) => {\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\tthis.total = res.message.total_rmbs\r\n\t\t\t\t\tthis.delivery_rmbs = res.message.delivery_rmbs\r\n\t\t\t\t\tthis.box_price = res.message.box_price_fmt\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 去选择地址\r\n\t\taddressClick() { // pages/sub/ai_xiaopu/address/index\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: './address/index?type=1',\r\n\t\t\t\tanimationType: 'pop-in',\r\n\t\t\t\tanimationDuration: 2000\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 返回后渲染选择的地址\r\n\t\tchooseAddress(data) {\r\n\t\t\tthis.address_detail = data\r\n\t\t\tthis.model.addressid = data.addressid\r\n\t\t},\r\n\t\tgoPayMoney() {\r\n\r\n\t\t\tif (this.model.addressid == 0) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\ttitle: '请选择地址',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t// uni.switchTab({\r\n\t\t\t// \turl: '../order/order-list',\r\n\t\t\t// \tanimationType: 'pop-in',\r\n\t\t\t// \tanimationDuration: 2000\r\n\t\t\t// })\r\n\t\t\tthis.paying = true;\r\n\t\t\tthis.$store.dispatch('ai_xiaopu/orderAdd', this.model).then((res) => {\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\tthis.toPay(res.message)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.paying = false;\r\n\t\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\ttoPay(token) {\r\n\t\t\tlet _this = this;\r\n\t\t\tthis.$store.dispatch('ai_xiaopu/orderPay', { 'order_token': token }).then((res) => {\r\n\t\t\t\tuni.setStorageSync('cart', []);\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\tlet data = res.message\r\n\t\t\t\t\t_this.paying = false;\r\n\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\ttimeStamp: data.timeStamp,\r\n\t\t\t\t\t\tnonceStr: data.nonceStr,\r\n\t\t\t\t\t\tpackage: data.package,\r\n\t\t\t\t\t\tsignType: data.signType,\r\n\t\t\t\t\t\tpaySign: data.paySign,\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\t_this.paying = false;\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/sub/center/my_order'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function (err) {\r\n\t\t\t\t\t\t\t_this.paying = false;\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/sub/center/my_order'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/sub/center/my_order'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t_this.paying = false;\r\n\t\t\t\t\t_this.$refs.uToast.show({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}).catch(() => {\r\n\t\t\t\t_this.paying = false;\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/sub/center/my_order'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tcouponClick() {\r\n\t\t\tif (this.coupon.length > 0) {\r\n\t\t\t\tthis.couponShow = true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcouponTabChange(index) {\r\n\t\t\tthis.current = index;\r\n\t\t},\r\n\t\tuse(data) {\r\n\r\n\t\t\tif (this.total < Number(data.need_rmbs)) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\ttitle: '未满足优惠券使用要求',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\r\n\t\t\tthis.activeCoupon = '￥' + data.rmbs\r\n\t\t\tthis.activeCouponNum = data.rmbs\r\n\r\n\t\t\tthis.model.couponid = data.id\r\n\r\n\t\t\tthis.couponShow = false\r\n\r\n\t\t\tthis.calculatePrice()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\npage {\r\n\tbackground-color: #f7f7f7;\r\n}\r\n\r\n.pay {\r\n\tbackground-color: #ffffff;\r\n\twidth: 100%;\r\n\theight: 105rpx;\r\n\tmargin: 0 auto;\r\n\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tz-index: 1000;\r\n\r\n\tbox-shadow: 0px -1px 3px #ececec;\r\n}\r\n\r\n.go {\r\n\twidth: 240rpx;\r\n\theight: 105rpx;\r\n\tline-height: 105rpx;\r\n\tbackground: linear-gradient(to right, #fbab7c, #de2406);\r\n\tcolor: #cecece !important;\r\n\ttext-align: center;\r\n\r\n}\r\n\r\n.colorWhiteBgBlue {\r\n\tbackground-color: #007AFF !important;\r\n\tcolor: #FFFFFF !important;\r\n}\r\n\r\n.u-cell {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tposition: relative;\r\n\tbox-sizing: border-box;\r\n\twidth: 100%;\r\n\tpadding: 26rpx 0;\r\n\tfont-size: 22rpx;\r\n\tline-height: 45rpx;\r\n\r\n\tbackground-color: #fff;\r\n\ttext-align: left;\r\n}\r\n\r\n.u-cell_title {\r\n\tpadding-left: 15rpx;\r\n\tfont-size: 28rpx;\r\n}\r\n\r\n.u-cell__value {\r\n\tflex: 1;\r\n\toverflow: hidden;\r\n\ttext-align: right;\r\n\tvertical-align: middle;\r\n\tcolor: #909399;\r\n\tfont-size: 26rpx;\r\n}\r\n\r\n.activeTab {\r\n\tbackground: #fff;\r\n\tborder-top: 1rpx solid #fff;\r\n\tborder-left: 1rpx solid #fff;\r\n\tborder-right: 1rpx solid #fff;\r\n\tborder-radius: 15rpx 15rpx 0 0;\r\n}</style>\r\n","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1693702162029\n      var cssReload = require(\"F:/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}