{"version":3,"sources":["uni-app:///main.js",null,"webpack:///F:/waimai/pages/sub/location/address_location.vue?2b3f","webpack:///F:/waimai/pages/sub/location/address_location.vue?726a","webpack:///F:/waimai/pages/sub/location/address_location.vue?8db6","uni-app:///pages/sub/location/address_location.vue","webpack:///F:/waimai/pages/sub/location/address_location.vue?5f8b","webpack:///F:/waimai/pages/sub/location/address_location.vue?cadf"],"names":["createPage","Page"],"mappings":"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","file":"pages/sub/location/address_location.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/sub/location/address_location.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./address_location.vue?vue&type=template&id=5a446c82&\"\nvar renderjs\nimport script from \"./address_location.vue?vue&type=script&lang=js&\"\nexport * from \"./address_location.vue?vue&type=script&lang=js&\"\nimport style0 from \"./address_location.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/sub/location/address_location.vue\"\nexport default component.exports","export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./address_location.vue?vue&type=template&id=5a446c82&\"","var components\ntry {\n  components = {\n    uSearch: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-search/u-search\" */ \"@/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uGap: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-gap/u-gap\" */ \"@/uview-ui/components/u-gap/u-gap.vue\"\n      )\n    },\n    uLine: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-line/u-line\" */ \"@/uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    uSelect: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-select/u-select\" */ \"@/uview-ui/components/u-select/u-select.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./address_location.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./address_location.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <view class=\"padding-20\">\r\n      <u-search\r\n        placeholder=\"搜索学校\"\r\n        v-model=\"keyword\"\r\n        :clearabled=\"true\"\r\n        @custom=\"tosearch\"\r\n        @blur=\"changeSearchShow(1)\"\r\n        @focus=\"changeSearchShow(2)\"\r\n        @clear=\"changeSearchShow(3)\"\r\n      ></u-search>\r\n    </view>\r\n    <view v-if=\"!search_show\">\r\n      <view class=\"padding-20\">\r\n        <view>\r\n          <view class=\"gray3 margin-bottom-20\">当前定位</view>\r\n          <view class=\"d-row padding-top-20 padding-bottom-20\">\r\n            <u-icon name=\"map\" color=\"#df691a\" size=\"32\"></u-icon>\r\n            <view class=\"flex-1 font-bold\">{{ address || \"未知地点\" }}</view>\r\n            <view class=\"gray3\" @tap=\"relocation\">重新定位</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      <u-gap height=\"15\" bg-color=\"#efefef\"></u-gap>\r\n      <view class=\"padding-20\">\r\n        <view class=\"gray3 padding-bottom-20\">附近学校</view>\r\n        <u-line color=\"#efefef\" />\r\n        <view>\r\n          <!-- <navigator v-for=\"(item,index) in schoolList\" :key=\"index\" :url=\"'/pages/index/floor?title='+item.title\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</navigator> -->\r\n          <view\r\n            v-for=\"(item, index) in schoolList\"\r\n            :key=\"index\"\r\n            @tap=\"handlebuilding(index, 0)\"\r\n            class=\"d-row margin-bottom-20 padding-top-20 padding-bottom-20\"\r\n          >\r\n            <view class=\"flex-1 font-bold text-sm\">\r\n              {{ item.schoolname }}\r\n            </view>\r\n            <view class=\"gray3\">{{ item.distance }}</view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-if=\"search_show\">\r\n      <view\r\n        v-for=\"(item, index) in searchList\"\r\n        :key=\"index\"\r\n        @tap=\"handlebuilding(index, 1)\"\r\n        class=\"d-row padding-30\"\r\n      >\r\n        <view class=\"flex-1 font-bold c21\">\r\n          {{ item.schoolname }}\r\n        </view>\r\n        <view class=\"gray3\">{{ item.distance }}</view>\r\n      </view>\r\n    </view>\r\n\r\n    <u-select\r\n      v-model=\"activeSchoolShow\"\r\n      :list=\"activeSchool\"\r\n      @confirm=\"confirm()\"\r\n    ></u-select>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { goBack, setLocalStorage } from \"@/tools/utils.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      keyword: \"\",\r\n      search_show: false,\r\n\r\n      latitude: 0,\r\n      longitude: 0,\r\n\r\n      address: \"\",\r\n      schoolList: [],\r\n\r\n      activeSchoolShow: false,\r\n      activeSchool: [],\r\n      activeSchoolIndex: 0,\r\n\r\n      searchList: [],\r\n\r\n      type: 1,\r\n    };\r\n  },\r\n  onLoad(option) {\r\n    this.type = option.type;\r\n    this.getLocation();\r\n  },\r\n  methods: {\r\n    getLocation() {\r\n      let _this = this;\r\n      uni.getLocation({\r\n        type: \"gcj02\",\r\n        geocode: true,\r\n        success: function (res) {\r\n          _this.latitude = res.latitude;\r\n          _this.longitude = res.longitude;\r\n\r\n          _this.getSchool(\r\n            { latitude: res.latitude, longitude: res.longitude },\r\n            0\r\n          );\r\n\r\n          uni.request({\r\n            header: {\r\n              \"Content-Type\": \"application/text\",\r\n            },\r\n            //注意:这里的key值需要高德地图的 web服务生成的key  只有web服务才有逆地理编码  IUPBZ-2YKKF-H6UJW-NDQUP-SG33J-WNF63\r\n            // url:'https://restapi.amap.com/v3/geocode/regeo?output=JSON&location='+res.longitude+','+res.latitude+'&key=280802ed0116fef931dbcf5e7e9278d7&radius=1000&extensions=all',\r\n            url:\r\n              \"https://apis.map.qq.com/ws/geocoder/v1/?location=\" +\r\n              _this.latitude +\r\n              \",\" +\r\n              _this.longitude +\r\n              \"&key=2W4BZ-CZNWO-GQUWR-SK4LN-W3CJV-7WF6O\",\r\n            success(res) {\r\n              if (res.statusCode === 200) {\r\n                _this.address = res.data.result.address;\r\n              } else {\r\n                console.log(\"获取信息失败，请重试！\");\r\n              }\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n    getSchool(data, type, callback = () => {}) {\r\n      \r\n      let _this = this;\r\n      _this.$store.dispatch(\"user/schoolList\", data).then((res) => {\r\n        if (res && res.code == 0) {\r\n          console.log(res.message, type, \"res.messageres.message\");\r\n          if (type == 0) {\r\n            _this.schoolList = res.message;\r\n          } else if (type == 1) {\r\n            _this.searchList = res.message;\r\n          }\r\n        } else {\r\n        }\r\n      });\r\n    },\r\n    relocation() {\r\n      this.getLocation();\r\n    },\r\n    changeSearchShow(type) {\r\n      if (type == 1) {\r\n        if (this.keyword == \"\") {\r\n          this.search_show = false;\r\n          this.searchList = [];\r\n        } else {\r\n          this.search_show = true;\r\n        }\r\n      } else if (type == 2) {\r\n        this.search_show = true;\r\n      } else if (type == 3) {\r\n        this.search_show = false;\r\n        this.searchList = [];\r\n      }\r\n    },\r\n    tosearch() {\r\n      this.getSchool({ keyword: this.keyword }, 1);\r\n    },\r\n    handlebuilding(index, type) {\r\n      this.type=type\r\n      let list = [];\r\n     \r\n      if (type == 0) {\r\n        this.schoolList[index][\"building_num\"].map((item, index) => {\r\n          list.push({ value: index, label: item });\r\n        });\r\n      } else {\r\n        this.searchList[index][\"building_num\"].map((item, index) => {\r\n          list.push({ value: index, label: item });\r\n        });\r\n      }\r\n\r\n      this.activeSchool = list;\r\n      this.activeSchoolIndex = index;\r\n      setTimeout(() => {\r\n        this.activeSchoolShow = true;\r\n      }, 10);\r\n    },\r\n    confirm(e) {\r\n      let floor = e[0][\"label\"];\r\n      let obj=this.type==0? this.schoolList[this.activeSchoolIndex]: this.searchList[this.activeSchoolIndex]\r\n      let { schoolname, schoolid } = obj\r\n      let address = floor + \" \" + schoolname;\r\n\r\n      // 调用上一个页面的 uplist 方法\r\n      goBack(\"seTaddress\", {\r\n        schoolname: schoolname,\r\n        floor: floor,\r\n        address: address,\r\n        schoolid: schoolid,\r\n        buid: e[0][\"value\"],\r\n      });\r\n\r\n      if (this.type == 0) {\r\n        setLocalStorage(\"address\", {\r\n          address: address,\r\n          schoolid: schoolid,\r\n          buid: e[0][\"value\"],\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.d-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.d-clo {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.flex-1 {\r\n  flex: 1;\r\n}\r\n\r\n.gray3 {\r\n  color: #909399;\r\n}\r\n.margin-bottom-20 {\r\n  margin-bottom: 20rpx;\r\n}\r\n.padding-20 {\r\n  padding: 20rpx;\r\n}\r\n.padding-30 {\r\n  padding: 30rpx;\r\n}\r\n.padding-top-20 {\r\n  padding-top: 20rpx;\r\n}\r\n.padding-bottom-20 {\r\n  padding-bottom: 20rpx;\r\n}\r\n.font-bold {\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./address_location.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./address_location.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1694014085526\n      var cssReload = require(\"F:/Hbuilder/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}